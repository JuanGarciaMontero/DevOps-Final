pipeline {
    agent any
    stages {
        stage ('Stage crea contenedor con Python') {
                   agent {
                       docker { image 'python:slim-bullseye' }
                   }
                   steps {
                       echo 'Stage con ejecuci√≥n normal, python'
                            sh 'python --version'
                            sh 'python -m venv env'
                            sh '. ./env/bin/activate'
                            sh 'ls -l /QA/'
                            sh 'chmod +r /QA/requirements.txt'
                            sh 'pip install -r /QA/requirements.txt'
                            sh 'pytest tests/'
                            sh 'pytest --cov=app tests/'
                   }
        }
        }
post { always { echo "Fin del pipeline" } }              
} 