pipeline {
    agent any
    stages {
        stage ('Stage crea contenedor con Python') {
                   agent {
                       docker { image 'python:slim-bullseye' }
                   }
                   steps {
                       echo 'Stage con ejecuci√≥n normal, python'
                            sh 'python --version'
                            sh 'pip install --user --cache-dir=$HOME/.pip-cache pytest==3.0.6'
                            sh 'pytest tests/'
                            sh 'pip install coverage'
                            sh 'pytest --cov=app tests/'
                   }
        }
        }
post { always { echo "Fin del pipeline" } }              
} 